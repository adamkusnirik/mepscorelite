# MEP Ranking System - Folder Structure & Requirements

## 📁 Project Directory Structure

```
mepranking/
├── 📂 data/                          # Data storage and processing
│   ├── 📂 parltrack/                 # ⭐ MAIN DATA UPDATE FOLDER
│   │   ├── ep_mep_activities.json.zst    # MEP activities (required)
│   │   ├── ep_amendments.json.zst        # Amendment details (required)
│   │   ├── ep_votes.json.zst             # Voting records (required)
│   │   ├── ep_meps.json.zst              # MEP info (required)
│   │   └── [decompressed .json files]    # Auto-generated during processing
│   ├── 📂 parltrack backup/          # Historical data (Terms 8 & 9)
│   ├── 📂 term_list/                 # Official MEP lists per term
│   │   ├── 8th term_raw.csv
│   │   ├── 9th term_raw.csv
│   │   └── 10th term_raw.csv
│   ├── meps.db                       # SQLite database (generated)
│   └── sync_metadata.json            # Update tracking (generated)
│
├── 📂 backend/                       # Data processing scripts
│   ├── ingest_parltrack.py           # Step 1: Import raw data
│   ├── build_term_dataset.py         # Step 2: Generate rankings
│   ├── mep_ranking_scorer.py         # 4-category scoring system
│   ├── outlier_based_scorer.py       # Statistical scoring methods
│   └── [other processing modules]
│
├── 📂 public/                        # Frontend web application
│   ├── 📂 data/                      # Generated JSON datasets
│   │   ├── term10_dataset.json       # Current term rankings (auto-generated)
│   │   ├── term9_dataset.json        # Historical rankings
│   │   └── term8_dataset.json        # Historical rankings
│   ├── 📂 js/                        # JavaScript modules
│   │   ├── app.js                    # Main application logic
│   │   ├── utilities.js              # Data loading functions
│   │   ├── profile.js                # MEP profile pages
│   │   └── [other JS modules]
│   ├── index.html                    # Main rankings page
│   ├── profile.html                  # MEP profile template
│   └── methodology.html              # Scoring methodology docs
│
├── 📂 agents/                        # AI agent system (optional)
├── 📂 logs/                          # System logs (generated)
├── run_update.py                     # ⭐ MAIN UPDATE COMMAND
├── run_update.bat                    # Windows update script
├── launch_app.py                     # Application launcher
└── requirements.txt                  # Python dependencies
```

## 🎯 Data Update Requirements

### Essential Files for Updates

**Location**: `\data\parltrack\`

| File | Purpose | Required | Size (approx) |
|------|---------|----------|---------------|
| `ep_mep_activities.json.zst` | MEP activities (speeches, amendments, etc.) | ✅ Yes | ~50-100MB |
| `ep_amendments.json.zst` | Detailed amendment data | ✅ Yes | ~20-50MB |
| `ep_votes.json.zst` | Parliamentary voting records | ✅ Yes | ~10-30MB |
| `ep_meps.json.zst` | MEP biographical & political info | ✅ Yes | ~5-10MB |

**Total Download**: ~85-190MB compressed data

### Generated Files (Auto-Created)

| File/Folder | Generated By | Purpose |
|-------------|--------------|---------|
| `data/meps.db` | `ingest_parltrack.py` | SQLite database with processed data |
| `public/data/term10_dataset.json` | `build_term_dataset.py` | Frontend JSON dataset |
| Decompressed `.json` files | Update process | Working files from compressed data |

## 🔄 Data Flow Process

```
1. ParlTrack Data (.zst files)
   ↓
2. Decompress & Validate
   ↓
3. Import to SQLite Database (meps.db)
   ↓
4. Apply 4-Category Scoring
   ↓
5. Generate Frontend JSON (term10_dataset.json)
   ↓
6. Update Profile Pages & Rankings
```

## 📋 File Requirements Checklist

### Before Data Update
- [ ] All 4 required .zst files present in `\data\parltrack\`
- [ ] Files are recent (check timestamps)
- [ ] Sufficient disk space (500MB+ recommended)
- [ ] Python environment ready

### After Data Update
- [ ] `data/meps.db` updated (check file timestamp)
- [ ] `public/data/term10_dataset.json` refreshed
- [ ] MEP count matches official EP numbers
- [ ] No error messages in console output
- [ ] Web application loads correctly

## 🗂️ File Management Best Practices

### Storage Management
- **Keep Original Files**: Always retain .zst files for backup
- **Archive Old Versions**: Move previous datasets to `backups/` folder
- **Monitor Disk Usage**: Large files can accumulate over time

### Version Control
- Track data update timestamps in `sync_metadata.json`
- Keep changelog of major MEP list changes
- Document significant parliamentary events affecting data

### Security & Access
- Protect database files from accidental deletion
- Regular backups of `data/meps.db`
- Maintain access logs for data updates

## ⚠️ Critical Paths

**Never Delete These Folders:**
- `\data\parltrack\` - Main data folder
- `\public\data\` - Generated datasets
- `\backend\` - Processing scripts

**Safe to Clean:**
- `\logs\` - System logs (regenerated)
- `\cache\` - Temporary files
- Decompressed `.json` working files (regenerated from .zst)

## 🔧 Troubleshooting File Issues

### Missing Files
```bash
# Check required files exist
ls data/parltrack/ep_*.zst

# Expected output: 4 files listed
```

### Permission Issues
- Ensure write access to `data/` folder
- Run updates with appropriate user permissions
- Check antivirus isn't blocking file access

### Disk Space Issues
- Minimum: 500MB free space required
- Recommended: 2GB for comfortable operation
- Monitor `data/` folder growth over time

## 📊 File Size Guidelines

### Normal Sizes (10th Term)
- **Database**: 50-200MB (`meps.db`)
- **Term Dataset**: 5-15MB (`term10_dataset.json`)
- **Log Files**: 1-5MB total

### Warning Signs
- Database >500MB (investigate data issues)
- JSON datasets >50MB (possible data bloat)
- Rapid file size growth (check for duplicates)

---

**Important**: The folder structure is designed for reliability and ease of maintenance. Following these guidelines ensures smooth data updates and system operation.